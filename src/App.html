<input type="number" bind:value="count">

<ol>
	{{#each arrayToDisplay as object @id}}
		<Top bind:top="idToTop[object.id]" position="{{object.id}}">
			<li>{{object.id}}: top is {{idToTop[object.id]}}</li>
		</Top>
	{{/each}}
</ol>

<script>
	import Top from './Top.html'

	export default {
		data() {
			return {
				count: 3,
				idToTop: Object.create(null)
			}
		},
		computed: {
			arrayToDisplay: count => new Array(count)
				.fill(null)
				.map((_, i) => ({ id: 'id-' + i}))
				.reverse()
		},
		components: {
			Top
		},
		oncreate() {
			this.observe('idToTop', map => console.log(map))
		}
	}
</script>
